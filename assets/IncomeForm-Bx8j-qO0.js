import{F as a,u as f,l as j,r as h,j as e,a as g,g as y,B as m,s as n}from"./index-B1irlVr5.js";import{d}from"./dayjs.min-CuWnGRVX.js";import{u as I}from"./financeStore-Cx6ve21G.js";import{S as Y}from"./index-CouCZRz8.js";import{T as b}from"./index-DtubzoSF.js";import{D}from"./index-B_DoBQcZ.js";const F=["销售收入","服务收入","投资收益","其他收入"];function S(){const[o]=a.useForm(),c=f(),{id:r}=j(),{records:l,addRecord:u,updateRecord:p}=I(),t=!!r;h.useEffect(()=>{if(t){const s=l.find(i=>i.id===r);s&&o.setFieldsValue({...s,date:d(s.date)})}},[r,t,l,o]);const x=s=>{const i={...s,date:s.date.format("YYYY-MM-DD"),type:"income"};t?(p(r,i),n.success("更新成功")):(u({...i,id:Date.now().toString(),createdAt:d().format("YYYY-MM-DD")}),n.success("添加成功")),c("/income")};return e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(g,{title:t?"编辑收入":"新增收入",children:e.jsxs(a,{form:o,layout:"vertical",onFinish:x,children:[e.jsx(a.Item,{name:"category",label:"类别",rules:[{required:!0,message:"请选择类别"}],children:e.jsx(Y,{placeholder:"选择类别",options:F.map(s=>({label:s,value:s}))})}),e.jsx(a.Item,{name:"description",label:"描述",rules:[{required:!0,message:"请输入描述"}],children:e.jsx(y,{placeholder:"输入描述"})}),e.jsx(a.Item,{name:"amount",label:"金额",rules:[{required:!0,message:"请输入金额"}],children:e.jsx(b,{className:"w-full",min:0,precision:2,placeholder:"输入金额",prefix:"¥"})}),e.jsx(a.Item,{name:"date",label:"日期",rules:[{required:!0,message:"请选择日期"}],children:e.jsx(D,{className:"w-full"})}),e.jsx(a.Item,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(m,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(m,{onClick:()=>c("/income"),children:"取消"})]})})]})})})}export{S as default};
