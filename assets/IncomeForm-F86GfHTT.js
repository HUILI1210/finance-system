import{F as a,u as x,l as f,r as j,j as e,a as h,g,B as m,s as n}from"./index-DvYlsgoa.js";import{d as y}from"./dayjs.min-BfZd7ylZ.js";import{u as I}from"./financeStore-DbLMuwj4.js";import{S as b}from"./index-Cew7-v5w.js";import{T as F}from"./index-CRZzFNA5.js";import{D as N}from"./index-BQmgfC5F.js";const v=["销售收入","服务收入","投资收益","其他收入"];function R(){const[o]=a.useForm(),c=x(),{id:r}=f(),{records:l,addRecord:d,updateRecord:u}=I(),t=!!r;j.useEffect(()=>{if(t){const s=l.find(i=>i.id===r);s&&o.setFieldsValue({...s,date:y(s.date)})}},[r,t,l,o]);const p=async s=>{const i={...s,date:s.date.format("YYYY-MM-DD"),type:"income"};t&&r?(await u(r,i),n.success("更新成功")):(await d(i),n.success("添加成功")),c("/income")};return e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(h,{title:t?"编辑收入":"新增收入",children:e.jsxs(a,{form:o,layout:"vertical",onFinish:p,children:[e.jsx(a.Item,{name:"category",label:"类别",rules:[{required:!0,message:"请选择类别"}],children:e.jsx(b,{placeholder:"选择类别",options:v.map(s=>({label:s,value:s}))})}),e.jsx(a.Item,{name:"description",label:"描述",rules:[{required:!0,message:"请输入描述"}],children:e.jsx(g,{placeholder:"输入描述"})}),e.jsx(a.Item,{name:"amount",label:"金额",rules:[{required:!0,message:"请输入金额"}],children:e.jsx(F,{className:"w-full",min:0,precision:2,placeholder:"输入金额",prefix:"¥"})}),e.jsx(a.Item,{name:"date",label:"日期",rules:[{required:!0,message:"请选择日期"}],children:e.jsx(N,{className:"w-full"})}),e.jsx(a.Item,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(m,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(m,{onClick:()=>c("/income"),children:"取消"})]})})]})})})}export{R as default};
