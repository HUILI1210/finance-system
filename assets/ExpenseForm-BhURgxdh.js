import{F as a,u as x,l as f,r as j,j as e,a as h,g,B as n,s as d}from"./index-DvYlsgoa.js";import{d as y}from"./dayjs.min-BfZd7ylZ.js";import{u as b}from"./financeStore-DbLMuwj4.js";import{S as F}from"./index-Cew7-v5w.js";import{T as I}from"./index-CRZzFNA5.js";import{D as N}from"./index-BQmgfC5F.js";const v=["办公费用","人力成本","营销费用","差旅费","其他支出"];function R(){const[l]=a.useForm(),o=x(),{id:r}=f(),{records:c,addRecord:m,updateRecord:u}=b(),t=!!r;j.useEffect(()=>{if(t){const s=c.find(i=>i.id===r);s&&l.setFieldsValue({...s,date:y(s.date)})}},[r,t,c,l]);const p=async s=>{const i={...s,date:s.date.format("YYYY-MM-DD"),type:"expense"};t&&r?(await u(r,i),d.success("更新成功")):(await m(i),d.success("添加成功")),o("/expense")};return e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(h,{title:t?"编辑支出":"新增支出",children:e.jsxs(a,{form:l,layout:"vertical",onFinish:p,children:[e.jsx(a.Item,{name:"category",label:"类别",rules:[{required:!0,message:"请选择类别"}],children:e.jsx(F,{placeholder:"选择类别",options:v.map(s=>({label:s,value:s}))})}),e.jsx(a.Item,{name:"description",label:"描述",rules:[{required:!0,message:"请输入描述"}],children:e.jsx(g,{placeholder:"输入描述"})}),e.jsx(a.Item,{name:"amount",label:"金额",rules:[{required:!0,message:"请输入金额"}],children:e.jsx(I,{className:"w-full",min:0,precision:2,placeholder:"输入金额",prefix:"¥"})}),e.jsx(a.Item,{name:"date",label:"日期",rules:[{required:!0,message:"请选择日期"}],children:e.jsx(N,{className:"w-full"})}),e.jsx(a.Item,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(n,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(n,{onClick:()=>o("/expense"),children:"取消"})]})})]})})})}export{R as default};
