import{F as a,u as f,l as j,r as h,j as e,a as g,g as y,B as c,s as d}from"./index-B1irlVr5.js";import{d as m}from"./dayjs.min-CuWnGRVX.js";import{u as Y}from"./financeStore-Cx6ve21G.js";import{S as b}from"./index-CouCZRz8.js";import{T as D}from"./index-DtubzoSF.js";import{D as F}from"./index-B_DoBQcZ.js";const I=["办公费用","人力成本","营销费用","差旅费","其他支出"];function S(){const[o]=a.useForm(),l=f(),{id:r}=j(),{records:n,addRecord:u,updateRecord:p}=Y(),t=!!r;h.useEffect(()=>{if(t){const s=n.find(i=>i.id===r);s&&o.setFieldsValue({...s,date:m(s.date)})}},[r,t,n,o]);const x=s=>{const i={...s,date:s.date.format("YYYY-MM-DD"),type:"expense"};t?(p(r,i),d.success("更新成功")):(u({...i,id:Date.now().toString(),createdAt:m().format("YYYY-MM-DD")}),d.success("添加成功")),l("/expense")};return e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(g,{title:t?"编辑支出":"新增支出",children:e.jsxs(a,{form:o,layout:"vertical",onFinish:x,children:[e.jsx(a.Item,{name:"category",label:"类别",rules:[{required:!0,message:"请选择类别"}],children:e.jsx(b,{placeholder:"选择类别",options:I.map(s=>({label:s,value:s}))})}),e.jsx(a.Item,{name:"description",label:"描述",rules:[{required:!0,message:"请输入描述"}],children:e.jsx(y,{placeholder:"输入描述"})}),e.jsx(a.Item,{name:"amount",label:"金额",rules:[{required:!0,message:"请输入金额"}],children:e.jsx(D,{className:"w-full",min:0,precision:2,placeholder:"输入金额",prefix:"¥"})}),e.jsx(a.Item,{name:"date",label:"日期",rules:[{required:!0,message:"请选择日期"}],children:e.jsx(F,{className:"w-full"})}),e.jsx(a.Item,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(c,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(c,{onClick:()=>l("/expense"),children:"取消"})]})})]})})})}export{S as default};
