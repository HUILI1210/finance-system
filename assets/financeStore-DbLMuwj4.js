import{G as s,a3 as n}from"./index-DvYlsgoa.js";const r=[{id:"1",category:"办公费用",amount:5e4,spent:25e3,month:"2024-01"},{id:"2",category:"人力成本",amount:2e5,spent:145e3,month:"2024-01"},{id:"3",category:"营销费用",amount:8e4,spent:35e3,month:"2024-01"}],u=s()(c=>({records:[],budgets:r,loading:!1,fetchRecords:async t=>{c({loading:!0});try{const{data:e}=await n.getRecords(t),d=e.data.map(a=>({id:a.id,type:a.type,amount:a.amount,category:a.category,description:a.description||"",date:a.date.split("T")[0],createdAt:a.createdAt.split("T")[0]}));c({records:d,loading:!1})}catch{c({loading:!1})}},addRecord:async t=>{try{const{data:e}=await n.createRecord({type:t.type,amount:t.amount,category:t.category,description:t.description,date:t.date}),d={id:e.id,type:e.type,amount:e.amount,category:e.category,description:e.description||"",date:e.date.split("T")[0],createdAt:e.createdAt.split("T")[0]};c(a=>({records:[d,...a.records]}))}catch{}},updateRecord:async(t,e)=>{try{const{data:d}=await n.updateRecord(t,e);c(a=>({records:a.records.map(o=>{var i;return o.id===t?{...o,...d,date:((i=d.date)==null?void 0:i.split("T")[0])||o.date}:o})}))}catch{}},deleteRecord:async t=>{try{await n.deleteRecord(t),c(e=>({records:e.records.filter(d=>d.id!==t)}))}catch{}},addBudget:t=>c(e=>({budgets:[...e.budgets,t]})),updateBudget:(t,e)=>c(d=>({budgets:d.budgets.map(a=>a.id===t?{...a,...e}:a)}))}));export{u};
